<!-- Management Dashboard -->
<!DOCTYPE html>
<html>
    <script>

        var oldRowIndex;
        function logout() {
            window.location.href='login.html'
        }

        function getItemData(itemName) {
   
            oldRowIndex = itemName.rowIndex;
            //console.log("itemName.cells[2]"+ itemName.cells[2].innerHTML);
            
            var name = itemName.cells[0].innerHTML;
            var desc = itemName.cells[1].innerHTML;
            var price = itemName.cells[2].innerHTML;
            var itemCategory = itemName.parentNode.parentNode.id;
            var categories = document.getElementById("itemCategory");

            document.getElementById("itemName").value = name;
            document.getElementById("itemDesc").value = desc;
            document.getElementById("itemPrice").value = price;

            for (i = 0; i < categories.length; i++) {
    		    if(categories[i].value == itemCategory) {
                    categories[i].selected = true;
                }
		    }

            return;
        }

        function editItem() {
            var formDetails = document.querySelector(".itemInfo");
            
            var table = document.getElementById("Category 1");
            var itemRow = document.createElement('tr');
            var newName = document.createElement('td');
            newName.width = '20%'
            newName.appendChild(document.createTextNode(formDetails[0].value));
            var newDesc = document.createElement('td');
            newDesc.width = '45%'
            newDesc.appendChild(document.createTextNode(formDetails[1].value));
            var newPrice = document.createElement('td');
            newPrice.width = '10%'
            newPrice.appendChild(document.createTextNode(formDetails[2].value));
            
            var sort = document.createElement('td');
            var edit = document.createElement('td');
            var remove = document.createElement('td');

            itemRow.appendChild(newName);
            itemRow.appendChild(newDesc);
            itemRow.appendChild(newPrice);

            table.appendChild(itemRow);
            table.deleteRow(oldRowIndex);
            oldRowIndex = '';


        }


        function removefromMenu() {
            // confirm the choice to remove item
        }

        function moveUpTable(thisRow) {
            var table = document.getElementById("Category 1");
            
            var thisIndex = thisRow.rowIndex;
            if(thisIndex == 1) {
                return;
            }
            
            var previousRow = table.rows[thisIndex-1];
            previousRow.parentNode.insertBefore(thisRow,previousRow);
        }
        
        function moveDownTable(thisRow) {
            var table = document.getElementById("Category 1");
            var thisIndex = thisRow.rowIndex;
            if(thisIndex == table.rows.length-1) {
                return;
            }

            var nextRow = table.rows[thisIndex+1];
            nextRow.parentNode.insertBefore(nextRow,thisRow);

        }

        function categoryUp() {

        }

        function categoryDown() {

        }
    </script>
<head>
    <meta name="viewport" content="width=device-width">
			<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
			<link href="https://fonts.googleapis.com/css?family=Courgette&display=swap" rel="stylesheet">
			<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
            <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
            <script src='https://kit.fontawesome.com/a076d05399.js'></script>
    <title>Management - Menu Edit</title>
</head>
<body>
    <nav class="navbar navbar-dark bg-dark navbar-expand-lg sticky-top">
        <img src="../../pictures/logo_transp.png" width="40" height="40" alt=""> &nbsp; &nbsp;
        <a class="navbar-brand" style="color:white; text-align: left;">Waiter</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item">
                    <a class="nav-link" href="dashboard.html">Dashboard</a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link disabled" href="menu_edit.html" >Edit Menu<span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="history.html">Restauraunt History</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="old_items.html">Old Menu Items</a>
                </li>
            </ul>
            <button class="btn btn-outline-success my-2 my-sm-0" onclick="logout()">Logout</button>
        </div>
    </nav>

    <div class="title">Edit Menu</div>

    <div class="container" style="background-color: transparent; text-align: center;">
        <button id="addCategory" type="button" class="btn btn-lg btn-primary" data-toggle="modal" data-target="#itemModal">Add Category</button>
        <button id="addItem" type="button" class="btn btn-lg btn-warning" data-toggle="modal" data-target="#itemModal">Add Menu Item</button>
    </div>

    <!-- Table per category -->
    <div class="container" style="overflow-x:auto;">   
        <div class="categoryTitle" style="text-align: center; background-color: transparent;">Category 1
            <span class="table-up"><a href="#!" class="indigo-text"><i class="fas fa-long-arrow-alt-up"
                aria-hidden="true" style='font-size:24px; color: white;'></i></a></span>
            <span class="table-down"><a href="#!" class="indigo-text"><i class="fas fa-long-arrow-alt-down"
                aria-hidden="true" style='font-size:24px; color: white;'></i></a></span>
            </div><br>     
        <table id="Category 1" class="table table-sm table-borderless table-striped table-hover display nowrap" style="text-align: center;">
            <thead>
            <tr>
                <th style="width: 20%">Item Name</th>
                <th style="width: 45%">Description</th>
                <th style="width: 10%">Price</th>
                <th class="width: 5%">Sort</th>
                <th class="text-center" style="width: 5%">Edit?</th>
                <th class="text-center" style="width: 5%">Remove?</th>
            </tr>
            </thead>
            <!-- Start of table, dynamic space-->
            <tbody>
                <tr id="item1">
                    <td class="align-middle">Item1</td>
                    <td class="align-middle">--------</td>
                    <td class="align-middle">$XXX.XX</td>
                    <td class="align-middle">
                        <span class="table-up"><a href="#!" onclick="moveUpTable(this.parentNode.parentNode.parentNode)" class="indigo-text"><i class="fas fa-long-arrow-alt-up"
                            aria-hidden="true" style='font-size:24px'></i></a></span>
                        <span class="table-down"><a href="#!" onclick="moveDownTable(this.parentNode.parentNode.parentNode)" class="indigo-text"><i class="fas fa-long-arrow-alt-down"
                            aria-hidden="true" style='font-size:24px'></i></a></span>
                    </td>
                    <td nowrap class="text-center align-middle">
                        <button id="item1" type="button" class="btn btn-lg btn-link" onclick="getItemData(this.parentNode.parentNode)" data-toggle="modal" data-target="#itemModal">
                            <span><i class="fas fa-edit" aria-hidden="true" style='font-size:24px'></i></span>
                        </button>
                    </td>
                    <td nowrap class="text-center align-middle">
                        <button id="item1" type="button" class="btn btn-lg btn-link" data-toggle="modal" data-target="#confirmModal">
                            <span><i class="fas fa-times" aria-hidden="true" style='font-size:24px'></i></span>
                        </button>
                    </td>
                </tr>
                <tr>
                    <td class="align-middle">Item2</td>
                    <td class="align-middle">--------</td>
                    <td class="align-middle">$XXX.XX</td>
                    <td class="align-middle">
                        <span class="table-up"><a href="#!" onclick="moveUpTable(this.parentNode.parentNode.parentNode)" class="indigo-text"><i class="fas fa-long-arrow-alt-up"
                            aria-hidden="true" style='font-size:24px'></i></a></span>
                        <span class="table-down"><a href="#!" onclick="moveDownTable(this.parentNode.parentNode.parentNode)" class="indigo-text"><i class="fas fa-long-arrow-alt-down"
                            aria-hidden="true" style='font-size:24px'></i></a></span>
                    </td>
                    <td nowrap class="text-center align-middle">
                        <button id="item1" type="button" class="btn btn-lg btn-link" data-toggle="modal" data-target="#itemModal">
                            <span><i class="fas fa-edit" aria-hidden="true" style='font-size:24px'></i></span>
                        </button>
                    </td>
                    <td nowrap class="text-center align-middle">
                        <button id="item1" type="button" class="btn btn-lg btn-link" data-toggle="modal" data-target="#confirmModal">
                            <span><i class="fas fa-times" aria-hidden="true" style='font-size:24px'></i></span>
                        </button>
                    </td>
                </tr>
                <tr>
                    <td class="align-middle">Item3</td>
                    <td class="align-middle">--------</td>
                    <td class="align-middle">$XXX.XX</td>
                    <td class="align-middle">
                        <span class="table-up"><a href="#!" onclick="moveUpTable(this.parentNode.parentNode.parentNode)" class="indigo-text"><i class="fas fa-long-arrow-alt-up"
                            aria-hidden="true" style='font-size:24px'></i></a></span>
                        <span class="table-down"><a href="#!" onclick="moveDownTable(this.parentNode.parentNode.parentNode)" class="indigo-text"><i class="fas fa-long-arrow-alt-down"
                            aria-hidden="true" style='font-size:24px'></i></a></span>
                    </td>
                    <td nowrap class="text-center align-middle">
                        <button id="item1" type="button" class="btn btn-lg btn-link" data-toggle="modal" data-target="#itemModal">
                            <span><i class="fas fa-edit" aria-hidden="true" style='font-size:24px'></i></span>
                        </button>
                    </td>
                    <td nowrap class="text-center align-middle">
                        <button id="item1" type="button" class="btn btn-lg btn-link" data-toggle="modal" data-target="#confirmModal">
                            <span><i class="fas fa-times" aria-hidden="true" style='font-size:24px'></i></span>
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>



    

    <!-- Item Info Modal -->
    <div class="modal" id="itemModal">
        <div class="modal-dialog">
        <div class="modal-content">
    
            <!-- Modal Header -->
            <div class="modal-header">
            <h4 class="modal-title">Edit Item</h4>
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
    
            <!-- Modal body -->
            <div class="modal-body">
                <form class="itemInfo">
                <label for="itemName">Item Name: </label>
                <input type='text' id='itemName' name='itemName' required='' style="width:75%"><br><br>
                <div class="_quantity">Item Desc: </div>
                <textarea type='text' id='itemDesc' name='itemDesc' style='min-width: 100%; border: solid 1px black;' placeholder='' required=''></textarea><br><br>
                <label for="itemPrice">Price: </label>
                <input type="text" name="itemPrice" id="itemPrice" style="width:25%" pattern="\d+(\.\d{2})?" value="" data-type="currency"  required=''>
                <small>Format: x.xx</small><br><br>
                <label for="itemCategory">Category: </label>
                <select id="itemCategory" class="itemCategory"style="width:50%" required="">
                    <option value="Category 1">Category 1</option>
                    <option value="Category 2">Category 2</option>
                    <option value="Category 3">Category 3</option>
                    <option value="Category 4">Category 4</option>
                </select>
                <div class="picture">Picture?
                <button id="uploadPic" type="button" class="btn btn-lg btn-link">
                    <span><i class="fas fa-file-upload" aria-hidden="true" style='font-size:24px'></i></span>
                </button>
                </div>
                </form>
            </div>
    
            <!-- Modal footer -->
            <div class="modal-footer">
                <button type="button" class="btn btn-lg btn-danger" data-dismiss="modal">Discard Changes</button>
                <button type="submit" class="btn btn-lg btn-primary" data-dismiss="modal" onclick="editItem(this)">Save Changes</button>
            </div>
        </div>
        </div>
    </div>

    <!-- Remove Item Modal -->
    <div class="modal" id="confirmModal">
        <div class="modal-dialog">
        <div class="modal-content">
    
            <!-- Modal Header -->
            <div class="modal-header">
            <h4 class="modal-title">Remove Item?</h4>
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
    
            <!-- Modal body -->
            <div class="modal-body">
                <div>Are you sure you want to remove this item from the current menu?</div><br>
            </div>
    
            <!-- Modal footer -->
            <div class="modal-footer">
                <button type="button" class="btn btn-lg btn-danger" data-dismiss="modal" onclick="removefromMenu()">Yes</button>
                <button type="button" class="btn btn-lg btn-primary" data-dismiss="modal">No</button>
            </div>
        </div>
        </div>
    </div>

</body>
<style>
body {
    background-color: #6f42c1;
}

.title {
    font-family: 'Courgette', cursive; 
	font-style: normal; 
	font-variant: normal;
    font-size: 50px;
    position: relative;
    color: white;
    margin-top: 2%;
    text-align: center;
    text-shadow:  2px 2px black;
}

.container {
    position: relative;
    border-radius: 20px;
    padding: 5px;
}

.table {
    background-color: white;
    border-radius: 20px;
}

.modal-backdrop {
    opacity:75% !important;
	height: 100%;
	width: 100%;
}

.categoryTitle {
    font-family: 'Courgette', cursive; 
	font-style: normal; 
	font-variant: normal;
    font-size: 25px;
    position: relative;
    color: white;
    margin-top: 2%;
    text-align: center;
}
</style>
</html>